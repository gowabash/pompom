#!/usr/bin/env ruby
require File.expand_path(File.dirname(__FILE__) + "/../lib/pompom.rb")

include FFI::NCurses
include Pompom

def display(screen, str)
  screen.clear
  screen.addstr(str)
  screen.refresh
end

pomodoro = Pomodoro.new

screen = NCursesScreen.new
screen.run do
  until pomodoro.finished?
    pomodoro.tick
    display screen, Artii::Base.new.asciify(Pompom.format_time(pomodoro.time_remaining))
  end
end
